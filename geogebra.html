<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Toán với GeoGebra</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            font-family: Arial, sans-serif;
            overflow: hidden; /* Ensure no scrollbars */
        }
        .menu {
            width: 100%;
            background-color: #007bff;
            overflow: hidden;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }
        .menu a {
            float: left;
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
        .menu a:hover {
            background-color: #ddd;
            color: black;
        }
        .content {
            width: 100%;
            height: calc(100% - 50px); /* Adjust height to fit below the menu */
            margin-top: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        iframe {
            width: 100%;
            height: 80%;
            border: none;
        }
        .latex-output {
            width: 100%;
            padding: 20px;
            box-sizing: border-box;
            border-top: 1px solid #ccc;
            text-align: center;
        }
        #latex-display {
            font-size: 24px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const iframe = document.getElementById('geogebra-iframe');
            const latexDisplay = document.getElementById('latex-display');

            iframe.onload = function() {
                const ggbApplet = iframe.contentWindow.ggbApplet;
                if (ggbApplet) {
                    ggbApplet.registerAddListener(updateLatex);
                    ggbApplet.registerRemoveListener(updateLatex);
                    ggbApplet.registerRenameListener(updateLatex);

                    function updateLatex() {
                        const allLabels = ggbApplet.getAllObjectNames();
                        let latexStrings = allLabels.map(label => {
                            const type = ggbApplet.getObjectType(label);
                            if (type === "function" || type === "line" || type === "conic") {
                                const value = ggbApplet.getLaTeXString(label);
                                return value ? `\\(${value}\\)` : '';
                            }
                            return '';
                        }).filter(Boolean).join('<br>');

                        latexDisplay.innerHTML = latexStrings;
                        MathJax.typesetPromise([latexDisplay]);
                    }
                } else {
                    console.error("GeoGebra applet not found!");
                }
            }
        });
    </script>
</head>
<body>
    <div class="menu">
        <a href="index.html">Home</a>
        <a href="tron_de.html">Trộn Đề</a>
        <a href="fixcode.html">Fix Code</a>
        <a href="find_latex.html">Tìm Kiếm</a>
        <a href="Ve_hinh.html">Vẽ Hình</a>
        <a href="tuong_tu.html">Đề Tương Tự</a>
        <a href="menu_tree.html">Menu ID</a>
        <a href="note.html">Ghi Chú</a>
        <a href="symbols.html">Symbols</a>
        <a href="geogebra.html">GeoGebra</a>
    </div>
    <div class="content">
        <iframe id="geogebra-iframe" scrolling="no" src="https://www.geogebra.org/calculator"></iframe>
        <div class="latex-output">
            <div id="latex-display"></div>
        </div>
    </div>
</body>
</html>
